{%- if section.settings.enable_bar -%}
  {%- unless section.settings.home_page_only and template != 'index' -%}
      <section id="ws--section-{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="announcement-bar">
          <div class="ws--announcement-bar">
              <div class="ws--announcement-bar-wrapper">
                  <p class="ws--announcement-bar-content ws--heading-h5 ws--heading-uppercase">
                      {%- if section.settings.link -%}
                        <a href="{{ section.settings.link }}">{{ section.settings.content | escape }}</a>
                      {%- else -%}
                        {{ section.settings.content | escape }}
                      {%- endif -%}
                  </p>
              </div>
          </div>
      </section>

      <style>
        #ws--section-{{ section.id }} {
          background: {{ section.settings.background }};
          color: {{ section.settings.text_color }};
        }
      </style>
      <script>
        document.documentElement.style.setProperty('--announcement-bar-height', document.getElementById('ws--section-announcement-bar').offsetHeight + 'px');
      </script>
  {%- endunless -%}
{%- endif -%}


{% schema %}
  {
    "name": "Announcement Bar",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_bar",
        "label": "Enable bar",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "home_page_only",
        "label": "Home page only",
        "default": false
      },
      {
        "type": "color",
        "id": "background",
        "label": "Background",
        "default": "#000000"
      },
      {
        "type": "color",
        "id": "text_color",
        "label": "Text",
        "default": "#ffffff"
      },
      {
        "type": "text",
        "id": "content",
        "label": "Text",
        "default": "Welcome to our store"
      },
      {
        "type": "url",
        "id": "link",
        "label": "Link"
      }
    ]
  }
{% endschema %}